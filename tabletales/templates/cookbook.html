{% extends "base.html" %}
{% load static %}
{% block content %}

<h1 class="page-title">My Cookbook ❤️</h1>

<div class="create-btn-container">
  <a href="{% url 'create_recipe' %}" class="create-recipe-btn">+ Create New Recipe</a>
</div>

<!-- My Recipes Section -->
<div class="collapsible">
  <button class="collapse-btn" type="button" data-target="#my-recipes">My Recipes ▼</button>
  <div id="my-recipes" class="collapsible-content">
    {% if my_recipes %}
      <div class="recipe-card-grid">
        {% for recipe in my_recipes %}
          <div class="recipe-card">
            <a href="{% url 'recipe_detail' recipe.pk %}">
              {% if recipe.image %}
                <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-thumb">
              {% else %}
                <img src="{% static 'images/default_recipe.png' %}" alt="Default image" class="recipe-thumb">
              {% endif %}
            </a>
            <div class="recipe-info">
              <h3><a href="{% url 'recipe_detail' recipe.pk %}">{{ recipe.title }}</a></h3>
              <a href="{% url 'edit_recipe' recipe.pk %}" class="edit-link">✏️ Edit Recipe</a>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>You haven’t created any recipes yet.</p>
    {% endif %}
  </div>
</div>

<!-- Favorite Recipes Section -->
<div class="collapsible">
  <button class="collapse-btn" type="button" data-target="#favorite-recipes">My Favourites ▼</button>
  <div id="favorite-recipes" class="collapsible-content">
    {% if favorite_recipes %}
      <div class="recipe-card-grid">
        {% for recipe in favorite_recipes %}
          <div class="recipe-card">
            <a href="{% url 'recipe_detail' recipe.pk %}">
              {% if recipe.image %}
                <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-thumb">
              {% else %}
                <img src="{% static 'images/default_recipe.png' %}" alt="Default image" class="recipe-thumb">
              {% endif %}
            </a>
            <div class="recipe-info">
              <h3><a href="{% url 'recipe_detail' recipe.pk %}">{{ recipe.title }}</a></h3>
              <p>By {{ recipe.author.username }}</p>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>You haven’t favorited any recipes yet.</p>
    {% endif %}
  </div>
</div>

<!-- External Files -->
<link rel="stylesheet" href="{% static 'css/cookbook.css' %}">
<script src="{% static 'js/cookbook.js' %}"></script>

{% endblock %}
