{% extends "base.html" %}
{% block content %}

<h1>{{ recipe.title }}</h1>
<p><em>by {{ recipe.author.username }}</em></p>

<!-- Favorite Button -->
<form action="{% url 'toggle_favorite' recipe.pk %}" method="post" style="display:inline;">
    {% csrf_token %}
    {% if user.is_authenticated %}
        <button type="submit" style="border:none; background:none; cursor:pointer; font-size:24px;">
            {% if user in recipe.favorited_by.all %}
                ‚ù§Ô∏è  <!-- filled heart if already favorited -->
            {% else %}
                ü§ç  <!-- empty heart if not favorited -->
            {% endif %}
        </button>
    {% else %}
        <a href="{% url 'login' %}">Login to favorite</a>
    {% endif %}
</form>

<h3>Ingredients</h3>
<table>
  {% for ingredient in recipe.ingredients.all %}
  <tr>
    <td>‚Ä¢ {{ ingredient.name }}</td>
    <td style="padding-left: 15px;">{{ ingredient.quantity }}</td>
  </tr>
  {% endfor %}
</table>

<h3>Instructions</h3>
<ol>
  {% for step in recipe.get_instruction_steps %}
    <li>{{ step }}</li>
  {% endfor %}
</ol>

{% endblock %}